StateLocation: /Users/jlester/.local/share/sous/state
Server: ""
SiblingURLs: {}
BuildStateDir: ""
Docker:
  RegistryHost: 192.168.99.100:5000
  DatabaseDriver: sqlite3_sous
  DatabaseConnection: file:dummy.db?mode=memory&cache=shared
User:
  Name: ""
  Email: ""
Docker:
  RegistryHost: 192.168.99.100:5000
/tmp/sous-work/sous-server /tmp/sous-work
Source: 192.168.99.100/2222/repos/sous-server
Owners: []
Kind: http-service
Deployments:
  left:
    Resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    NumInstances: 1
    Volumes: []
    Version: 0.0.0
  right:
    Resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    NumInstances: 1
    Volumes: []
    Version: 0.0.0
source: 192.168.99.100/2222/repos/sous-server
owners: []
kind: http-service
deployments:
  left:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    numinstances: 1
    volumes: []
    version: 0.0.0
  right:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    numinstances: 1
    volumes: []
    version: 0.0.0


source: 192.168.99.100/2222/repos/sous-server
owners:
- test@test.com
kind: http-service
deployments:
  left:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    env:
      GDM_REPO: ssh://root@192.168.99.100:2222/repos/gdm
      SOUS_DOCKER_REGISTRY_HOST: 192.168.99.100:5000
    numinstances: 1
    volumes: []
    version: 0.0.0
  right:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    env:
      GDM_REPO: ssh://root@192.168.99.100:2222/repos/gdm
      SOUS_DOCKER_REGISTRY_HOST: 192.168.99.100:5000
    numinstances: 1
    volumes: []
    version: 0.0.0

FROM golang:1.7

# Add deploy key.
COPY ./key_sous@example.com /root/.ssh/id_rsa
COPY ./known_hosts /root/.ssh/known_hosts
COPY ./docker.crt /docker.crt

RUN chmod -R og-rwx /root/.ssh

COPY ./sous /go/bin/sous

COPY main.go /go/src/github.com/opentable/sous-server/
WORKDIR /go/src/github.com/opentable/sous-server
RUN go install -v

# Run sous server.
# NOTE: You must have set PORT0, GDM_REPO
CMD /go/bin/sous-server
.
..
.git
Dockerfile
docker.crt
key_sous@example.com
main.go
sous
sous-server.yaml
[master 47902ce] Adding ephemeral files
 3 files changed, 30 insertions(+)
 create mode 100644 key_sous@example.com
 create mode 100644 known_hosts
 create mode 100755 sous
  (Sous)> running docker build .
  (Sous)>   Sending build context to Docker daemon 31.42 MB
  (Sous)>   Step 1/10 : FROM golang:1.7
  (Sous)>    ---> 7afbc2b03b9e
  (Sous)>   Step 2/10 : COPY ./key_sous@example.com /root/.ssh/id_rsa
  (Sous)>    ---> Using cache
  (Sous)>    ---> e275d60882b0
  (Sous)>   Step 3/10 : COPY ./known_hosts /root/.ssh/known_hosts
  (Sous)>    ---> Using cache
  (Sous)>    ---> f7d846aced33
  (Sous)>   Step 4/10 : COPY ./docker.crt /docker.crt
  (Sous)>    ---> Using cache
  (Sous)>    ---> ad92b5454787
  (Sous)>   Step 5/10 : RUN chmod -R og-rwx /root/.ssh
  (Sous)>    ---> Using cache
  (Sous)>    ---> 9bf89627738d
  (Sous)>   Step 6/10 : COPY ./sous /go/bin/sous
  (Sous)>    ---> b5fa6257e870
  (Sous)>   Removing intermediate container c73bbd026276
  (Sous)>   Step 7/10 : COPY main.go /go/src/github.com/opentable/sous-server/
  (Sous)>    ---> 1dd7bc80590a
  (Sous)>   Removing intermediate container 0fd58b03569e
  (Sous)>   Step 8/10 : WORKDIR /go/src/github.com/opentable/sous-server
  (Sous)>    ---> 6b720d898a15
  (Sous)>   Removing intermediate container 88498fe291bf
  (Sous)>   Step 9/10 : RUN go install -v
  (Sous)>    ---> Running in 68a1bc28f832
  (Sous)>   [91mgithub.com/opentable/sous-server
  (Sous)>   [0m ---> b5aaefa75735
  (Sous)>   Removing intermediate container 68a1bc28f832
  (Sous)>   Step 10/10 : CMD /go/bin/sous-server
  (Sous)>    ---> Running in ec3d6dc1c07e
  (Sous)>    ---> e53d947a9a23
  (Sous)>   Removing intermediate container ec3d6dc1c07e
  (Sous)>   Successfully built e53d947a9a23
  (Sous)> running docker build -t 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2 -t 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:47902cef4da030d1ee01830e3629d6056019cdd7 -
  (Sous)>   Sending build context to Docker daemon 2.048 kB
  (Sous)>   Step 1/2 : FROM e53d947a9a23
  (Sous)>    ---> e53d947a9a23
  (Sous)>   Step 2/2 : LABEL com.opentable.sous.repo_offset "" com.opentable.sous.repo_url "192.168.99.100/2222/repos/sous-server" com.opentable.sous.revision "47902cef4da030d1ee01830e3629d6056019cdd7" com.opentable.sous.version "0.0.2" com.opentable.sous.advisories "dirty workspace"
  (Sous)>    ---> Running in 6ab4b946799a
  (Sous)>    ---> 489558f1be2d
  (Sous)>   Removing intermediate container 6ab4b946799a
  (Sous)>   Successfully built 489558f1be2d
  (Sous)> running docker push 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2
  (Sous)>   The push refers to a repository [192.168.99.100:5000/192.168.99.100/2222/repos/sous-server]
  (Sous)>   0cad4e6eb244: Preparing
  (Sous)>   d952fd72d084: Preparing
  (Sous)>   977ed203cd41: Preparing
  (Sous)>   c8a057f0c582: Preparing
  (Sous)>   657c362948e5: Preparing
  (Sous)>   8e09fd4051c9: Preparing
  (Sous)>   269c96c6b1a0: Preparing
  (Sous)>   8eb1c995f8b9: Preparing
  (Sous)>   677062ced7d3: Preparing
  (Sous)>   d23a95ba38e5: Preparing
  (Sous)>   f4d2be23d596: Preparing
  (Sous)>   30339f20ced0: Preparing
  (Sous)>   0eb22bfb707d: Preparing
  (Sous)>   a2ae92ffcd29: Preparing
  (Sous)>   8eb1c995f8b9: Waiting
  (Sous)>   677062ced7d3: Waiting
  (Sous)>   d23a95ba38e5: Waiting
  (Sous)>   f4d2be23d596: Waiting
  (Sous)>   30339f20ced0: Waiting
  (Sous)>   0eb22bfb707d: Waiting
  (Sous)>   a2ae92ffcd29: Waiting
  (Sous)>   269c96c6b1a0: Waiting
  (Sous)>   8e09fd4051c9: Waiting
  (Sous)>   657c362948e5: Layer already exists
  (Sous)>   c8a057f0c582: Layer already exists
  (Sous)>   8e09fd4051c9: Layer already exists
  (Sous)>   269c96c6b1a0: Layer already exists
  (Sous)>   8eb1c995f8b9: Layer already exists
  (Sous)>   677062ced7d3: Layer already exists
  (Sous)>   d23a95ba38e5: Layer already exists
  (Sous)>   d952fd72d084: Pushed
  (Sous)>   f4d2be23d596: Layer already exists
  (Sous)>   30339f20ced0: Layer already exists
  (Sous)>   a2ae92ffcd29: Layer already exists
  (Sous)>   0eb22bfb707d: Layer already exists
  (Sous)>   0cad4e6eb244: Pushed
  (Sous)>   977ed203cd41: Pushed
  (Sous)>   0.0.2: digest: sha256:2f0c0334d9f87d7bf615cbb7d7bb43b23647d7d86f8c4cc75ed9b94a0f5c2bfd size: 3252
  (Sous)> running docker push 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:47902cef4da030d1ee01830e3629d6056019cdd7
  (Sous)>   The push refers to a repository [192.168.99.100:5000/192.168.99.100/2222/repos/sous-server]
  (Sous)>   0cad4e6eb244: Preparing
  (Sous)>   d952fd72d084: Preparing
  (Sous)>   977ed203cd41: Preparing
  (Sous)>   c8a057f0c582: Preparing
  (Sous)>   657c362948e5: Preparing
  (Sous)>   8e09fd4051c9: Preparing
  (Sous)>   269c96c6b1a0: Preparing
  (Sous)>   8eb1c995f8b9: Preparing
  (Sous)>   677062ced7d3: Preparing
  (Sous)>   d23a95ba38e5: Preparing
  (Sous)>   f4d2be23d596: Preparing
  (Sous)>   30339f20ced0: Preparing
  (Sous)>   0eb22bfb707d: Preparing
  (Sous)>   a2ae92ffcd29: Preparing
  (Sous)>   8e09fd4051c9: Waiting
  (Sous)>   269c96c6b1a0: Waiting
  (Sous)>   8eb1c995f8b9: Waiting
  (Sous)>   677062ced7d3: Waiting
  (Sous)>   d23a95ba38e5: Waiting
  (Sous)>   f4d2be23d596: Waiting
  (Sous)>   30339f20ced0: Waiting
  (Sous)>   0eb22bfb707d: Waiting
  (Sous)>   a2ae92ffcd29: Waiting
  (Sous)>   657c362948e5: Layer already exists
  (Sous)>   d952fd72d084: Layer already exists
  (Sous)>   c8a057f0c582: Layer already exists
  (Sous)>   977ed203cd41: Layer already exists
  (Sous)>   0cad4e6eb244: Layer already exists
  (Sous)>   677062ced7d3: Layer already exists
  (Sous)>   269c96c6b1a0: Layer already exists
  (Sous)>   8e09fd4051c9: Layer already exists
  (Sous)>   d23a95ba38e5: Layer already exists
  (Sous)>   8eb1c995f8b9: Layer already exists
  (Sous)>   f4d2be23d596: Layer already exists
  (Sous)>   30339f20ced0: Layer already exists
  (Sous)>   a2ae92ffcd29: Layer already exists
  (Sous)>   0eb22bfb707d: Layer already exists
  (Sous)>   47902cef4da030d1ee01830e3629d6056019cdd7: digest: sha256:2f0c0334d9f87d7bf615cbb7d7bb43b23647d7d86f8c4cc75ed9b94a0f5c2bfd size: 3252
  (Sous)> [recording "192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2" as the docker name for "192.168.99.100/2222/repos/sous-server,0.0.2+47902cef4da030d1ee01830e3629d6056019cdd7"]
Built: "192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2"
Advisories:
  dirty workspace
Elapsed: 4.52248996s
Updated global manifest.

Updated global manifest.

/tmp/sous-work
