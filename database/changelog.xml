<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="judson (generated)" id="1513627199847-1">
        <createTable tableName="cluster_qualities">
            <column autoIncrement="true" name="cluster_quality_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="cluster_qualities_pkey"/>
            </column>
            <column name="cluster_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="quality_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-2">
        <createTable tableName="clusters">
            <column autoIncrement="true" name="cluster_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="clusters_pkey"/>
            </column>
            <column name="name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="kind" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="base_url" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_skip" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_connect_delay" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_timeout" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_connect_interval" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_proto" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_path" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_port_index" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_failure_statuses" type="_INT4">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_url_timeout" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_interval" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="crdef_retries" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-3">
        <createTable tableName="component_owners">
            <column autoIncrement="true" name="component_owner_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="component_owners_pkey"/>
            </column>
            <column name="component_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="owner_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-4">
        <createTable tableName="components">
            <column autoIncrement="true" name="component_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="components_pkey"/>
            </column>
            <column name="repo" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="dir" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="flavor" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="kind" type="TEXT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-5">
        <createTable tableName="deployments">
            <column autoIncrement="true" name="deployment_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="deployments_pkey"/>
            </column>
            <column name="versionstring" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="num_instances" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="schedule_string" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_proto" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_path" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_connect_delay" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_timeout" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_connect_interval" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_port_index" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_uri_timeout" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_interval" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_retries" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cr_failure_statuses" type="_INT4">
                <constraints nullable="false"/>
            </column>
            <column name="cr_skip" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="cluster_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="components_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-6">
        <createTable tableName="env_defaults">
            <column autoIncrement="true" name="env_default_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="env_defaults_pkey"/>
            </column>
            <column name="key" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="cluster_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-7">
        <createTable tableName="env_fdefs">
            <column autoIncrement="true" name="env_fdef_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="env_fdefs_pkey"/>
            </column>
            <column name="field_name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="var_type" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="default_value" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-8">
        <createTable tableName="envs">
            <column autoIncrement="true" name="env_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="envs_pkey"/>
            </column>
            <column name="key" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="deployment_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-9">
        <createTable tableName="metadatas">
            <column autoIncrement="true" name="metadata_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="metadatas_pkey"/>
            </column>
            <column name="name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="deployment_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-10">
        <createTable tableName="owners">
            <column autoIncrement="true" name="owner_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="owners_pkey"/>
            </column>
            <column name="email" type="TEXT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-11">
        <createTable tableName="qualities">
            <column autoIncrement="true" name="quality_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="qualities_pkey"/>
            </column>
            <column name="name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="kind" type="TEXT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-12">
        <createTable tableName="resource_fdefs">
            <column autoIncrement="true" name="resource_fdef_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="resource_fdefs_pkey"/>
            </column>
            <column name="field_name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="var_type" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="default_value" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-13">
        <createTable tableName="resources">
            <column autoIncrement="true" name="resource_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="resources_pkey"/>
            </column>
            <column name="resource_name" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="resource_value" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="deployment_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-14">
        <createTable tableName="volumes">
            <column autoIncrement="true" name="volume_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="volumes_pkey"/>
            </column>
            <column name="host" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="container" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="mode" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="deployment_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-15">
        <addForeignKeyConstraint baseColumnNames="cluster_id" baseTableName="cluster_qualities" constraintName="cluster_qualities_cluster_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="cluster_id" referencedTableName="clusters"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-16">
        <addForeignKeyConstraint baseColumnNames="quality_id" baseTableName="cluster_qualities" constraintName="cluster_qualities_quality_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="quality_id" referencedTableName="qualities"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-17">
        <addForeignKeyConstraint baseColumnNames="component_id" baseTableName="component_owners" constraintName="component_owners_component_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="component_id" referencedTableName="components"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-18">
        <addForeignKeyConstraint baseColumnNames="owner_id" baseTableName="component_owners" constraintName="component_owners_owner_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="owner_id" referencedTableName="owners"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-19">
        <addForeignKeyConstraint baseColumnNames="cluster_id" baseTableName="deployments" constraintName="deployments_cluster_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cluster_id" referencedTableName="clusters"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-20">
        <addForeignKeyConstraint baseColumnNames="components_id" baseTableName="deployments" constraintName="deployments_components_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="component_id" referencedTableName="components"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-21">
        <addForeignKeyConstraint baseColumnNames="cluster_id" baseTableName="env_defaults" constraintName="env_defaults_cluster_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="cluster_id" referencedTableName="clusters"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-22">
        <addForeignKeyConstraint baseColumnNames="deployment_id" baseTableName="envs" constraintName="envs_deployment_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="deployment_id" referencedTableName="deployments"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-23">
        <addForeignKeyConstraint baseColumnNames="deployment_id" baseTableName="metadatas" constraintName="metadatas_deployment_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="deployment_id" referencedTableName="deployments"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-24">
        <addForeignKeyConstraint baseColumnNames="deployment_id" baseTableName="resources" constraintName="resources_deployment_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="deployment_id" referencedTableName="deployments"/>
    </changeSet>
    <changeSet author="judson (generated)" id="1513627199847-25">
        <addForeignKeyConstraint baseColumnNames="deployment_id" baseTableName="volumes" constraintName="volumes_deployment_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION" referencedColumnNames="deployment_id" referencedTableName="deployments"/>
    </changeSet>
</databaseChangeLog>
